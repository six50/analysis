# SixFifty Poll Tracker

### Poll Trackers
The following images are generated by this repo.

#### UK National Voting Intention
![Poll tracker (1200x600)](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-1200x600.png "Poll tracker (1200x600)")
([_Download_](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-1200x600.png))

#### Scotland Voting Intention
![Poll tracker (Scotland)](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-scotland.png "Poll tracker (Scotland)")
([_Download_](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-scotland.png))

#### Wales Voting Intention
![Poll tracker (Wales)](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-wales.png "Poll tracker (Wales)")
([_Download_](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-wales.png))

#### Northern Ireland Voting Intention
![Poll tracker (Northern Ireland)](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-ni.png "Poll tracker (Northern Ireland)")
([_Download_](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-ni.png))

#### London Voting Intention
![Poll tracker (London)](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-london.png "Poll tracker (London)")
([_Download_](https://s3-eu-west-1.amazonaws.com/sixfifty/polls-london.png))

### Licenses
Please feel free to use any of these images with attribution to "sixfifty.org.uk". The underlying data is readily available from the [SixFifty open data pipeline](https://github.com/six50/pipeline/tree/master/data/polls) in a variety of formats (CSV, JSON, Feather). [To the extent that we could determine](https://sixfifty.org.uk/2017/05/21/building-sixfiftys-election-tracker/#fn:1), data from polling tables can be republished with attribution.

### Requirements
Ensure you have the following R libraries installed:
- `dplyr`
- `extrafont`
- `ggplot2`
- `grid`
- `lubridate`
- `tidyr`
```

You will also need to install the Open Sans font. [This download link might work for you](https://fonts.google.com/download?family=Open%20Sans), otherwise [this StackOverflow post](http://stackoverflow.com/questions/14170113/is-it-possible-to-download-open-sans-as-available-on-google-fonts-to-use-on-my-d) contains instructions with screenshots.

### Scripts
From this directory, running `Rscript poll_tracker.R` will:
1. Download [`polls.csv`](https://s3-eu-west-1.amazonaws.com/sixfifty/polls.csv) and reshape it into the format required for visualisation.
2. Use ggplot to visualise polls plus add a smoothed LOESS line to each party's polling.
3. Export in as 1200x600 PNG file into the current local directory.
4. Upload using the AWS CLI into SixFifty's S3 bucket (this won't work unless you have AWS tokens plus required write permissions on this bucket).
